---
title : "Placeholder for drafts posts in my blog"
description : "Description of the post"
slug : "draft-post"
draft : true
tags : ["code"]
date : "1995-08-08"
hidden: true
---

Atomic swaps & why they work.

An atomic swap is a trust-minimized mechanism that allows transactions to happen across several different chains.

For instance, one could seamlessly convert their BTC to LTC or Convert their Ether to Zcash. All without the need of a centralized exchange like binance.

No need for KYC, expensive fees, emails or Passwords all this occurs in your wallet.

This is the value prop of atomic swaps, and this article is an attempt clarify how they actually work under the hood.

So, what’s the problem?

Let’s looks at this scenario.

Alice has 80 LTC  in her LTC wallet & she is willing to swap them for 1 BTC 
Bob has 1 BTC in his wallet & he is willing to swap it for 80 LTC

As you may have figured out,  Alice and Bob can just swap coins with each other, but the problem is that Alice may receive Bob’s 1 BTC  and never give Bob the 80 LTC he is expecting.

This is what’s  known as counter-party risk. We can completely eliminate this counter party risk. We need the help of two crypto-economic primitives & a very specific game of signing ceremonies.

Components of an atomic swap.

At the heart of the atomic swap, there are two  crypto-economic primitives.

The Hash lock
The hash lock does only one thing. It only allows money to be drawn from it if someone can supply a certain secret number (a kind of key)

nLockTime
nLockTime also does only one thing. It only allows money to be drawn from it when a particular amount of time has passed (estimated using block time)

The Game 

The game is basically based upon two pairs of transactions generated by Alice & Bob & a secret number X that Alice makes.

For both Alice an Bob & the pair of transactions they generate.

Alice generates TX1 & TX2, then Bob generates transaction TX3  & TX4

Alice’s ritual is as follows;
Alice generates a random number X.
Then she creates two transactions. We shall call these TX1 & TX2
In TX1,  she uses a hash lock.  This hash lock will pay 80 LTC  to Bob. Only if ;
       - Bob can prove his identity  (using digital signatures)
& 
       - Bob supplies the secret number X that Alice generates.

In TX2, she uses nLockTime. In this transaction, Alice is able to withdrawal the same 80 LTC. But only 48 hours in to the future courtesy of nLockTime. Alice then signs this transaction.

Bobs’s ritual is as follows;
He creates two transactions. We shall call these TX3 & TX4.
In TX3,  he uses a hash lock as in TX2. TX3 only allows Alice to withdrawal Bob’s 1 BTC only if;
       - Alice can prove her identity his (using digital signatures)
       - Alice supplies the secret number X that she generated.

In TX4, Just like Alice, he uses nLockTime.  So in this transaction, Bob is able to withdrawal the same 1BTC. But only 24  hours in to the future courtesy of nLockTime. He also signs this transaction.

Closing ceremony.
Alice  exchanges a copy of  TX1 & TX2 for a copy of Bob’s TX3 & TX4.

Redemption.
Alice then spends TX3 by signing it to prove her identity & submitting secret X to the hash-lock.
The hash-lock then logs secret X on chain to make it available to everyone in the public. Including Bob.
Bob can then use secret X to withdrawal the 80 LTC from

Is counter-party risk solved? 
This is a long game (11 steps) but has it solved counter party risk? Let’s find out.

The game is made up of 11 steps. We shall consider counter-party risk eliminated  only if it’s not possible for neither Bob nor Alice to defraud each other as I outlined earlier above.

And in this process, we shall findout why atomic swaps work.


Why does this work? 
A Nash equilibrium is an optimal decision one makes to minimize chances of a rip off.


Let’s analyze each stage one by one.


How they are used today.
Lightnings  payments o
